#!/usr/bin/env node
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", { value: true });
var fs = __importStar(require("fs"));
var path = __importStar(require("path"));
var _e = process.argv, args = _e.slice(2);
if (args[0] === 'migrate') {
    var packagePath = path.resolve(process.cwd(), 'package.json');
    if (fs.existsSync(packagePath)) {
        var packageFile = JSON.parse(fs.readFileSync(packagePath).toString('utf-8'));
        if ((_b = (_a = packageFile === null || packageFile === void 0 ? void 0 : packageFile.ui5) === null || _a === void 0 ? void 0 : _a.dependencies) === null || _b === void 0 ? void 0 : _b.includes('@sap/ux-ui5-fe-mockserver-middleware')) {
            var depIndex = (_d = (_c = packageFile === null || packageFile === void 0 ? void 0 : packageFile.ui5) === null || _c === void 0 ? void 0 : _c.dependencies) === null || _d === void 0 ? void 0 : _d.indexOf('@sap/ux-ui5-fe-mockserver-middleware');
            packageFile.ui5.dependencies.splice(depIndex, 1, '@sap-ux/ui5-middleware-fe-mockserver');
            delete packageFile.devDependencies['@sap/ux-ui5-fe-mockserver-middleware'];
            packageFile.devDependencies['@sap-ux/ui5-middleware-fe-mockserver'] = '^2.1.4';
            fs.writeFileSync(packagePath, JSON.stringify(packageFile, null, 4));
            console.log("Your package.json file has been updated, please run 'npm install' or 'yarn install' again to update your locally available package");
        }
        else {
            console.log("Your package.json file has no reference to @sap/ux-ui5-fe-mockserver-middleware, this script won't do anything");
        }
    }
    else {
        console.log('No package.json file found, make sure this command in run at the root of your project');
    }
}
else {
    console.log("Unknown option '" + args[0] + "', currently supported option is 'migrate'");
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xpLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vY2xpLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUEscUNBQXlCO0FBQ3pCLHlDQUE2QjtBQUV2QixJQUFBLEtBQWdCLE9BQU8sQ0FBQyxJQUFJLEVBQXBCLElBQUksY0FBZ0IsQ0FBQztBQUVuQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxTQUFTLEVBQUU7SUFDdkIsSUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLEVBQUUsY0FBYyxDQUFDLENBQUM7SUFDaEUsSUFBSSxFQUFFLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1FBQzVCLElBQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUMvRSxJQUFJLE1BQUEsTUFBQSxXQUFXLGFBQVgsV0FBVyx1QkFBWCxXQUFXLENBQUUsR0FBRywwQ0FBRSxZQUFZLDBDQUFFLFFBQVEsQ0FBQyxzQ0FBc0MsQ0FBQyxFQUFFO1lBQ2xGLElBQU0sUUFBUSxHQUFHLE1BQUEsTUFBQSxXQUFXLGFBQVgsV0FBVyx1QkFBWCxXQUFXLENBQUUsR0FBRywwQ0FBRSxZQUFZLDBDQUFFLE9BQU8sQ0FBQyxzQ0FBc0MsQ0FBQyxDQUFDO1lBQ2pHLFdBQVcsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxFQUFFLHNDQUFzQyxDQUFDLENBQUM7WUFDekYsT0FBTyxXQUFXLENBQUMsZUFBZSxDQUFDLHNDQUFzQyxDQUFDLENBQUM7WUFDM0UsV0FBVyxDQUFDLGVBQWUsQ0FBQyxzQ0FBc0MsQ0FBQyxHQUFHLFFBQVEsQ0FBQztZQUMvRSxFQUFFLENBQUMsYUFBYSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNwRSxPQUFPLENBQUMsR0FBRyxDQUNQLG9JQUFvSSxDQUN2SSxDQUFDO1NBQ0w7YUFBTTtZQUNILE9BQU8sQ0FBQyxHQUFHLENBQ1AsZ0hBQWdILENBQ25ILENBQUM7U0FDTDtLQUNKO1NBQU07UUFDSCxPQUFPLENBQUMsR0FBRyxDQUFDLHVGQUF1RixDQUFDLENBQUM7S0FDeEc7Q0FDSjtLQUFNO0lBQ0gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBbUIsSUFBSSxDQUFDLENBQUMsQ0FBQywrQ0FBNEMsQ0FBQyxDQUFDO0NBQ3ZGIiwic291cmNlc0NvbnRlbnQiOlsiIyEvdXNyL2Jpbi9lbnYgbm9kZVxuXG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuXG5jb25zdCBbLCAsIC4uLmFyZ3NdID0gcHJvY2Vzcy5hcmd2O1xuXG5pZiAoYXJnc1swXSA9PT0gJ21pZ3JhdGUnKSB7XG4gICAgY29uc3QgcGFja2FnZVBhdGggPSBwYXRoLnJlc29sdmUocHJvY2Vzcy5jd2QoKSwgJ3BhY2thZ2UuanNvbicpO1xuICAgIGlmIChmcy5leGlzdHNTeW5jKHBhY2thZ2VQYXRoKSkge1xuICAgICAgICBjb25zdCBwYWNrYWdlRmlsZSA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKHBhY2thZ2VQYXRoKS50b1N0cmluZygndXRmLTgnKSk7XG4gICAgICAgIGlmIChwYWNrYWdlRmlsZT8udWk1Py5kZXBlbmRlbmNpZXM/LmluY2x1ZGVzKCdAc2FwL3V4LXVpNS1mZS1tb2Nrc2VydmVyLW1pZGRsZXdhcmUnKSkge1xuICAgICAgICAgICAgY29uc3QgZGVwSW5kZXggPSBwYWNrYWdlRmlsZT8udWk1Py5kZXBlbmRlbmNpZXM/LmluZGV4T2YoJ0BzYXAvdXgtdWk1LWZlLW1vY2tzZXJ2ZXItbWlkZGxld2FyZScpO1xuICAgICAgICAgICAgcGFja2FnZUZpbGUudWk1LmRlcGVuZGVuY2llcy5zcGxpY2UoZGVwSW5kZXgsIDEsICdAc2FwLXV4L3VpNS1taWRkbGV3YXJlLWZlLW1vY2tzZXJ2ZXInKTtcbiAgICAgICAgICAgIGRlbGV0ZSBwYWNrYWdlRmlsZS5kZXZEZXBlbmRlbmNpZXNbJ0BzYXAvdXgtdWk1LWZlLW1vY2tzZXJ2ZXItbWlkZGxld2FyZSddO1xuICAgICAgICAgICAgcGFja2FnZUZpbGUuZGV2RGVwZW5kZW5jaWVzWydAc2FwLXV4L3VpNS1taWRkbGV3YXJlLWZlLW1vY2tzZXJ2ZXInXSA9ICdeMi4xLjQnO1xuICAgICAgICAgICAgZnMud3JpdGVGaWxlU3luYyhwYWNrYWdlUGF0aCwgSlNPTi5zdHJpbmdpZnkocGFja2FnZUZpbGUsIG51bGwsIDQpKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgIGBZb3VyIHBhY2thZ2UuanNvbiBmaWxlIGhhcyBiZWVuIHVwZGF0ZWQsIHBsZWFzZSBydW4gJ25wbSBpbnN0YWxsJyBvciAneWFybiBpbnN0YWxsJyBhZ2FpbiB0byB1cGRhdGUgeW91ciBsb2NhbGx5IGF2YWlsYWJsZSBwYWNrYWdlYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgIGBZb3VyIHBhY2thZ2UuanNvbiBmaWxlIGhhcyBubyByZWZlcmVuY2UgdG8gQHNhcC91eC11aTUtZmUtbW9ja3NlcnZlci1taWRkbGV3YXJlLCB0aGlzIHNjcmlwdCB3b24ndCBkbyBhbnl0aGluZ2BcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnTm8gcGFja2FnZS5qc29uIGZpbGUgZm91bmQsIG1ha2Ugc3VyZSB0aGlzIGNvbW1hbmQgaW4gcnVuIGF0IHRoZSByb290IG9mIHlvdXIgcHJvamVjdCcpO1xuICAgIH1cbn0gZWxzZSB7XG4gICAgY29uc29sZS5sb2coYFVua25vd24gb3B0aW9uICcke2FyZ3NbMF19JywgY3VycmVudGx5IHN1cHBvcnRlZCBvcHRpb24gaXMgJ21pZ3JhdGUnYCk7XG59XG4iXX0=